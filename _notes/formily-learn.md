---
title: 一个月的Formily使用经验总结
---
## 背景
因为工作原因近一个月换了完全没用过的技术栈开发新项目。React、Storybook这些倒还好，基本一天就上手了，倒是Formily这厮陆续摸索了半个多月才算入门，趁一阶段工作结束空隙我就把这些经验总结一下。

> 因为项目原因我使用Formily的方式不一定是最佳实践甚至不一定是对的，对表单方面的使用也约等于零，主要场景集中于使用[@formily/antd-v5](https://antd5.formilyjs.org/)和自制组件上。

## 基础
Formily是阿里开发的一套以Schema描述表单的开源框架，不过我们项目中使用它的理由并不是构建表单，而是用于动态构建页面。

Formily里有三个比较重要的概念：**Form**、**Field**和**Schema**。
- **Form**是整个表单的核心，其实例可用于获取和设置表单的校验、值、字段、字段联动等内容
- **Field**是Form的组成部件，也就是字段，比如表单里设置了一个叫name为`keyword`的输入框，那每次修改输入框的内容时，`form.values.keyword`就会跟着变动。
- **Schema**是描述Field的数据，可以简单的认为其与ReactNode等价，具体一个Schema能包含什么内容可以参考[官方文档](https://react.formilyjs.org/zh-CN/api/shared/schema)。
	- 在Schema转组件的过程中Formily会默认代理组件的`value`和`onChange`，所以要开发Formily组件时要考虑到这一点。
## 从一个简单的页面开始
先从一个简单的示例开始

![[Pasted image 20241003170934.png]]

![[Pasted image 20241003171026.png]]

上面的代码创建一个==“带边框的div，里面装着一个输入框和另一个带了两个输入框的容器”==的场景，从代码中我们可以得到几个结论：
- Schema的层级结构相当于HTML中的层级结构，其中的`properties`起到了类似`children`的作用。
-  `createForm`中可以定义表单的一些初始状态？
-  `x-component`代表当前位置需要渲染的元素，可以支持原生的标签可自定义的组件，其中的自定义组件需要在`createSchemaField`中进行注册。
-  `x-component-props`中定义了组件的props，`x-decorator`定义了包装这个组件的组件。

简单操作一下表单，可以发现Schema和实际的表单值的映射关系。

![[Pasted image 20241003171319.png]]

<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1204.4409466911766 543.37890625" width="1204.4409466911766" height="543.37890625">
  <!-- svg-source:excalidraw -->
  
  <defs>
    <style class="style-fonts">
      @font-face {
        font-family: Excalifont;
        src: url(data:font/woff2;base64,d09GMgABAAAAAA/4AA4AAAAAGwgAAA+kAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGhYbhQYcNAZgAHwRCAqnEJx8CzYAATYCJANoBCAFgxgHIBvJFKOirBEekP3VAW8YPvUAtNKpY7C4xYLcSln5nUqTUwQsZB+GN/cccogbom01uwssnUobRRpNa2MGdqMX6WWGd9/67UUX/+DvufPu/3/769alKJhgk3TFTKASoiLEjk8/t58nbVEUk2SauP4kE0ohpUH/A/SHB1G3LHcI625b+zNyBAIx4VAKmFenvb3aqyQHChRoDzAHRD9pPkw4/mF31niVZEpSsh1se5AUiE623vf736/VP+vVgdM9WWh46ZS065dB284DT/up7iFa53QqWUSaaNz26YRGDVYTnVICC+yMWFfiog5nAxAAyAScMKhBAIp5HCKNaJj9ISkTCK/utgYgvLdV1gPh09XRBIQwAAD3jSGPW1sTwAO+NBgwIErgsZt8ZwBeoSEUdND24zf/UdrtzxcZqtZP8W238in5Uwhaf/znKTlRxDJ4YIOeEBoY8kzYER4RCRUdCxtnYwiMHw8ATEODimRMAZ2KjEoqFFrYX5AoIKiAUlp4oGqFCFCEMtgyTLCZ2FAIqskb0KujK8pDA9FNGHTbyxyzGx3S1HIBkGiuBLrQ+QzKQza1nh0p4DQp99T1A1bpNLq2AKzKxJ9qWNpJgnUEAGyaIdOJUSNc9BBwiJ0t7DJkq1SrRSd3t0JxlJ7TpVq9tg/SnLLou688LseY4aCFcfwFSbOQDAU9AdwbQL/zAMAgo4YGR88EjacjlFGOp+a0SD1bzTNGUn022RahOEmVZBF4+NKMu4LEeBfdEDyYCzoCc8+nUrLmKrJuK+UwCRO4GtoM6UGIIlTqsRCteSDfdCq4ARh9EqjxRFl2ExIVVIKtNURF8pjtYuntNL+5b1KeloXaYogYAJewZQDclAYAgtquwedERhiDx8bcIsAMOKwvPwOkOGCFMNKH/8ujuSe1YOBIVtSyFT21mNK2p6cT9e/xPU1JpEmRmAIj8WGxzVhAzcjoIJeV1etlRfketfdjVbg50mCKyB/zS4wLxDAqeAY4TQaEKnT9GIRQE/qrYbVoAPw3k4fmxFVXpvtJ/+xzzeeJ5YgVoEBTtQGr176rTctZL8+X9xV9f195eXuahtCI5z1pdxzgMMB6wZz1oc9vbQV2fefjTEVohxV0lIIItSZQKToZIwBTe13iQ/2Hws0XZaXcgmYIC3gBpAsspBYEDHDGCQYotaiVU4b48l1dWZbNEJcA6EJSsHUcQowR5wblkg8ha5ANg1pi/75e5YaQw/qcg8b5yoXqnxsKFFRZm/fquq7osu0FFmKs39yOfd3y28yvlSQT7+y1uCfxDmOIiUrgjwY3U5r5KRS8JrJD6w+Xeao8W+03zZAB8g5FJUSnQPPkvFowofna9RNZUhXUW81MfoAiK4iKnGdafljpzHbmmD2k2Fw8E2QWmt1pNW2wkBC+Yo770ARYIr40uNKz94YKi7IKN/ak/xnzKH/KrRTc/HWPsGeOxJv4IYz4L1tvE/WyHBYWrvexHVNgV57E1TS5lqP2mzgzlWTo3z15Xi1SStRlIVmtxjSl/IMrNo9uRLyYCzrG+N152ccqUCUQfeHNNJIYYNzv53Vl+XGU72X3AkRFFmIofD3f6MN/5uMTQSQYOwcVBhq3sMRFKnYrpytDfDSIjAW9vVQnFSFyBUfwofpd3GXZ/kW/289VTO7yB/b2kFeK2vMxohO4IST3SQH86gzUEA0CZEXtFAmrRXMEqgVDKJB7nif0eb0sWz8OAkZxwEFG8MErnyRRhtV05UYgWkM5acMsVOhrRiY6ddsWsyS2UsAjeqx8RfX9sClkSCaP6ETJGhVv3jnKe2zZfpXADBGGGRNMv1gME4AzzQi1xEi4RhWGje71qh6Zj7kXhDqPTiZa/d8yRrG4YcVBXqY+JToqLmlUoBWAe8DcDgPHQ1QMiQIG/GdtCRS0tESqmkTwDbOQEX8g2lzJRajY61ALm4JaEPTJSUWv15X6Td0dJ2E/ZNSiYALsZLa+cxMdWZpT5rPzsv5jf8uAm85WVuO8k1oWraEgAjgAV8BMCBtFgYxD9zeMKaUoUC7I8SEeHfv5dvySwOcpCuxFM3ggqUxgNEOVP7RLXLWtZzNp8/Zsyv3jx93ll9vHqqCCioSHpGYy2QC4AYbDxMQG3rCtS5HBknHdqJ3QXUiIoGayaSubV9JquduyCd1GXoAWZA0Lle5+5NZcba5vr5jMb+Cm4wBswFm/3w9qeuN/Z+rPqQH6vRQNOrvDQg7IN9F1fWI6pNydfqlEPVUNEx/GytvlVKrVVrmFqfx1sPt6qReIm9ABCv6Ydkwn4fAwaFQOXuHmn3nPQ9Sis1T3pt1j1egSskYtLqYYtFevK3pL7ul2oCEMXyAukT3H3XndLF5PTuLCapsKCqrfXkzi//NoQozJrM07VwaJgblBKzfGo0OysBrCyeGMuRjTy3V7cqd16LauK6s/Xn2UpvsImIECo1fNfPhn2mL+YuUCKHKi9+Bhc9ZKTm3BXHO+SVzdLsXBXXQMfEdm+9g02mvkpVT4lLDGwqAD6M/9tprMaUWDDGLh0xfvbfmLU5wGU5N4HkDScfMRFtWe5Rb0pI1J5INO+tokNq6IfOZLAu7UBllCVzoqHdpH42/g9eVE/HN+7+FNmc5+ym/28pnwuCW/xCRXEEpZpQS4UaKwoiRBsED79EEptXW4X6ZCShnovSxc8c+oaMdmMALC/228er8my9meZP/Mkl34vkg2FMqR/vGdska1NWik71V/g4nJehWeSyY0YTbA2ESjVMrivEG2uYid+F2w4xhklbNp7VmmFxgfl/5AVSLWqXBixyryA7Icxv/FtO37Pj2erCMNm7Fjcbn90U5HlHUJE4KkVWOwdB9bJRDA7XCKfNPWAgU98JZ6kRba+lYdCyUQHs9elGHTZjV69UXS/l2xu9WpgfqQwzenjXGAtrmfzWcWlPXHkrCz++FCyMmq0ewcYTiQLCbizixL9GyfbYxJmVj8zhTZWAnEwopJB+J7puncc/YqJ/WInqSFaD6M/Vi6/7j9AiTfKq+s88j+7XJNj+u0RzI3IZ5yFz4w+vXro3CWvzFx67HCw9sRJ+yt/wbO4u6Y+OoZdf+lZnF8IV/bEf8K+Zw4WirKqF0a+kthwUxeCk9ewJ9BTcV8AVi/ss32c0rDFq7Jy9KaaS5i/AuNqIxDelBDAkY/L3dfC6ZWCIikCodPQiChEMoYicsUcZ5TOHVXGYuI4pdY2iQxbTriHKN86BG31DPQKQ9tmbIoyaDNy6YP9F4ayGQ43j5e6a9MJZyyX8/6mZEPCimnhWmvy+lXPuPsTbPGcUu8HsYOyKoGY1QDp5Ghd2FDCx7NeeVtOAabI9a/0X1JhvbWY9sMKL+nCGxkai8P7/yES4tCCanje1PItxK8oxEUcaM4DbcihUkvhiMPv0wXLTIAp4pcr/RMVsa6gnLEotgEjydGlN34XNDURHPEnxswrG85ION9yPGPWsBZAzsImZV64JV9XllVF52WxH9dfro1LUaNSctDuBx9w/XL1E1lSeNZYweuWNpUcvbtfic3LRVj9rEq8h93Y9vfmYgSOOOufmYrh/2zrnoNYHex7CH5jctiBSkuHvOYde4HOQKGxxGSi5mYNHhmsDZiUngc0Zhb8yElxAGwJA0J233Q5vz2ut4ut0ZExG+tOsq4opSa2SWe+K4VyKZ+JRCFLk/1rKV2SyuWXfV/CF5BvPovvzYezfLwmE+9Ib6GQv6HxJssBwiGEqTXwIlMpADmUr/6sLCh5jmluyHw4zescDTmTQzqsue3pOu5XFkc2zN3lTjXFwph2lrBrDO3P0mkxI3jXCyGM31B7GRdr8INhTFyGJP4v6wHFIkIdaK5qFDySH3hd05j858BeHkQBAf51IFNov/LbdNNmvsbyQxcNYKzfzzb4Tw3HjwdiCrNj5ec3TE4ykY1D8NdXq4Kue9hCMbj4CLtP/62gUnfkXpvJt6NSoxIA2QnztQcVGLhVFytqkABrY0DY1m8gevQSD4FJZIuCWHSb/5urtgTHo1FHERKAOUIuiAeQmzSXesovQOgF6wvVa6E34RzyXMKSozLv9zJ9Tn8jh3SzorKuPXfrvkJp/F5UM4pyTI1ufts5o+mxtSAEXA5QZth7WGsSF2hT3o2D74ak0Nqh7UgOElfMg3sg4kCZlU101So3hnHk+PwMlOIMZ0VmNK6xnrcM560QIJNRgh0y0vpuTo/aghk2fu3IrtZMRwrW1c3u36vhyOLmYacgYSPpTXgKsa39mT8F0xtnW/tTpP34piEyTEDevuOmMaR4neVLRpponc2Nz7UTjKtrobkmYH+nheOMjLnWPFefiSI2Phybz1Y3tbSMpx9guHlIG7CgyohlF5IsI5+eZllo6DzOj00cd/Io543RcuH0w0rMAS4X4bWhVfMXRK88GSkiBMfZ8/cqXpPSqStGkntBbMU86hWNnaPnMzTyynQutW8DdMLxpWwsQThjDg2ebNj5BQiSzUVtHEp08MiNtwajKIi8QgXtgKTjfW3KlT3RLJ+TyxJ/NM8Y1fAymRzltBktJcNiXCNDwqVGVhYhrzS7rN2xXHSJ2LTXu7v/PLvXxM/vNiX9So3xFx8G2W0ykaNAuzQwQLV0EEVqU/Njsu2nP2PINlTduWmJYyVSz4dWn24hrs+0AtpqVJph/eYBjdsA2NdH+z0PbwiOy2UmLpL+L3SoHnj3GeaYOuuHeHAdLJ3nh68lhZb2heS7GyVjgLDZBwabprycHQlPx2O7nN7Stfv7TfqN8/hQzZSFgUX+J4l1451INJAWKkKD0r/vcz7HEFyPKFKnOAd+usOFMGUrqPKgvzUoZgoiuP1V2YeuN4uXaCSkYvDZm6Pmjv0nz1MJij/W1TQYHIR43hjvBkfxjhwfi+RUqq/44/eJTf/zfkallqNsUbOyBjBF8uTe6NbDc/hcFULf3f0Dl1IOCFaISR+L2vQsc7NiLaX0CLf4UnIQwAAuOX2tZrnuL32Sd+PCd/7MCsfz0cA4MEFQl/UdQszxfGvE3/fGkE4lbGN2QD8wmsBn25KqAkhJ26x1Pkxjo+kFfFJQJQfv0IYvUWPI8AthhaJjArCyqVJIGQsp82Tdz6glK5i0jWaAwj9CxfsGkEtAMR2Yy9UPgQ0EwAADYbcdAjbyXQY1e50hK/+dAylsnSsaErguLsBwKZHOZcGtao0a9IhQLpK1To1cGn7YxBv054a5DpLaQXSGBLBkZ5wa1FD+WNJD50Jb550S4fwqbwQ6fjKVm+VwSFFRKHx3OSpsJjSwp2CWhTXNARvBHxM0dEcYVCljFsdVxQVaN2lWyAnJg3GXGlxbveh0qRKdHGdKgRCQEU/vsMCAAA=);
          }
    </style>
    
  </defs>
  <rect x="0" y="0" width="1204.4409466911766" height="543.37890625" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(469.7146139705883 44.23828125) rotate(0 135.4453125 244.5703125)"><path d="M32 0 C89.78 -3.12, 149.81 -5.01, 238.89 0 C257.35 -2.62, 273.41 13.82, 270.89 32 C271.99 158.79, 270.6 285.46, 270.89 457.14 C271.28 476.05, 262.1 487.12, 238.89 489.14 C181.32 489.45, 128.66 489.02, 32 489.14 C8.63 491.41, 1.82 480.52, 0 457.14 C3.19 291.52, 2.77 122.19, 0 32 C2.94 11.8, 13.39 -1.95, 32 0" stroke="none" stroke-width="0" fill="#e3fafc"></path><path d="M32 0 C91.62 -1.42, 146.74 0.92, 238.89 0 M32 0 C103.36 0.26, 172.92 -0.19, 238.89 0 M238.89 0 C260.47 -0.08, 269.47 11.93, 270.89 32 M238.89 0 C257.98 0.94, 268.78 8.8, 270.89 32 M270.89 32 C271.02 170.8, 271.63 309.82, 270.89 457.14 M270.89 32 C272.07 119.47, 271.5 207.27, 270.89 457.14 M270.89 457.14 C271.9 477.8, 259.64 488.6, 238.89 489.14 M270.89 457.14 C271.22 477.64, 261.49 489.94, 238.89 489.14 M238.89 489.14 C188.04 488.01, 141.8 489.05, 32 489.14 M238.89 489.14 C159.87 489.04, 79.91 488.64, 32 489.14 M32 489.14 C11.26 488.43, -1.88 478.69, 0 457.14 M32 489.14 C9.74 487.52, -0.37 479.65, 0 457.14 M0 457.14 C-1.2 367.43, -1.74 277.56, 0 32 M0 457.14 C-1.67 293.51, -2.7 130.99, 0 32 M0 32 C-1.68 11.54, 11.85 -1.23, 32 0 M0 32 C-0.89 8.79, 11.98 -0.54, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g stroke-linecap="round" transform="translate(479.0896139705883 52.37890625) rotate(0 125.607421875 17.5)"><path d="M8.75 0 C62.07 -4.34, 109.32 -3.88, 242.46 0 C250.82 -2.56, 253.22 5.48, 251.21 8.75 C248.8 15.96, 249.61 24.85, 251.21 26.25 C249.82 34.1, 244.73 38.07, 242.46 35 C150.7 39.26, 54.78 40.16, 8.75 35 C6.29 32.55, -3.36 33.38, 0 26.25 C3.19 22.27, 3.28 16.4, 0 8.75 C1.14 0.66, 1.93 -2.35, 8.75 0" stroke="none" stroke-width="0" fill="#ffffff"></path><path d="M8.75 0 C84.15 1.97, 158.38 2.68, 242.46 0 M8.75 0 C56.48 0.26, 102.55 1.47, 242.46 0 M242.46 0 C248.93 1.51, 250.13 3.69, 251.21 8.75 M242.46 0 C246.41 0.47, 252.68 2.92, 251.21 8.75 M251.21 8.75 C250.95 14.07, 250.55 16.84, 251.21 26.25 M251.21 8.75 C250.59 13.3, 251.76 18.65, 251.21 26.25 M251.21 26.25 C252.48 31.68, 249.68 36.4, 242.46 35 M251.21 26.25 C250.12 32.22, 249.35 34.3, 242.46 35 M242.46 35 C172.92 32.88, 102.92 35.63, 8.75 35 M242.46 35 C158.48 34.35, 72.63 35.16, 8.75 35 M8.75 35 C0.96 36.56, 0.55 32.96, 0 26.25 M8.75 35 C2.18 35.84, -2.28 33.58, 0 26.25 M0 26.25 C-1 22.8, -0.39 18.47, 0 8.75 M0 26.25 C-0.61 22.26, 0.38 19.02, 0 8.75 M0 8.75 C-0.37 2.13, 2.87 -0.73, 8.75 0 M0 8.75 C2.17 4.56, 3.4 0.94, 8.75 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(545.8270712459789 57.37890625) rotate(0 58.869964599609375 12.5)"><text x="58.869964599609375" y="17.619999999999997" font-family="Excalifont, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">monthSelect</text></g><g stroke-linecap="round" transform="translate(481.5075827205883 95.46484375) rotate(0 125.779296875 214.99609375)"><path d="M32 0 C88.81 -2.62, 150.44 -2.84, 219.56 0 C240.97 2.36, 254.79 12.14, 251.56 32 C248.46 172.87, 247.66 318.9, 251.56 397.99 C249.25 422.65, 238.95 431.78, 219.56 429.99 C169.99 430.86, 126.85 428.04, 32 429.99 C10.86 430.91, -2.9 416.13, 0 397.99 C-0.64 315.15, -0.1 233.97, 0 32 C0.69 7.9, 7.91 1.97, 32 0" stroke="none" stroke-width="0" fill="#ffffff"></path><path d="M32 0 C82.95 -0.5, 132.84 1.78, 219.56 0 M32 0 C94.19 0.37, 157.37 1.45, 219.56 0 M219.56 0 C241.31 0.82, 249.87 9.68, 251.56 32 M219.56 0 C242.23 2.25, 249.84 10.57, 251.56 32 M251.56 32 C253.85 120.87, 254.33 207.41, 251.56 397.99 M251.56 32 C249.62 116.92, 249.67 201.28, 251.56 397.99 M251.56 397.99 C249.58 421.03, 242.81 429.49, 219.56 429.99 M251.56 397.99 C253.75 419.87, 241.56 427.93, 219.56 429.99 M219.56 429.99 C150.45 429.43, 84.17 427.7, 32 429.99 M219.56 429.99 C162.29 429.98, 103.35 429.65, 32 429.99 M32 429.99 C10.12 428.69, 1.16 418, 0 397.99 M32 429.99 C11.47 428.97, -1.97 420.91, 0 397.99 M0 397.99 C-2.47 315.32, -0.97 234.96, 0 32 M0 397.99 C-0.06 262.51, 0.15 126.61, 0 32 M0 32 C-1.19 12.45, 10.42 0.08, 32 0 M0 32 C-1.09 12.72, 11.97 -1.75, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g stroke-linecap="round" transform="translate(497.1208639705883 112.1875) rotate(0 111.728515625 38.736328125)"><path d="M19.37 0 C72.99 -4.83, 125.81 -6.53, 204.09 0 C215.98 -1.64, 226.44 9.11, 223.46 19.37 C226.25 25.15, 222.91 38.53, 223.46 58.1 C226.93 72.72, 214.91 79.61, 204.09 77.47 C168.98 76.31, 130.89 74.86, 19.37 77.47 C7.65 77.28, 1.82 67.68, 0 58.1 C-2.88 46.47, 0.84 32.47, 0 19.37 C3.17 3.43, 9.32 2.17, 19.37 0" stroke="none" stroke-width="0" fill="#fff9db"></path><path d="M19.37 0 C73.24 -1.57, 123.42 0.17, 204.09 0 M19.37 0 C69.44 1.78, 117.93 1.75, 204.09 0 M204.09 0 C218.42 1.35, 222.01 6.25, 223.46 19.37 M204.09 0 C217.88 -0.76, 221.47 4.53, 223.46 19.37 M223.46 19.37 C221.69 33.5, 224.85 47.35, 223.46 58.1 M223.46 19.37 C224.19 31.83, 223.92 45.17, 223.46 58.1 M223.46 58.1 C222.51 72, 216.84 76.04, 204.09 77.47 M223.46 58.1 C222.62 71.3, 214.74 79.75, 204.09 77.47 M204.09 77.47 C132.85 77.22, 61.79 75.91, 19.37 77.47 M204.09 77.47 C138.34 79.64, 72.16 79.58, 19.37 77.47 M19.37 77.47 C4.79 79.44, -0.09 72.9, 0 58.1 M19.37 77.47 C5.24 77.08, -1.14 70.41, 0 58.1 M0 58.1 C-0.83 45.17, -0.31 33.71, 0 19.37 M0 58.1 C0.95 46.98, 1.29 35.39, 0 19.37 M0 19.37 C-0.04 6.23, 5.58 -1.14, 19.37 0 M0 19.37 C-1.61 4.83, 5.66 -0.17, 19.37 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(579.7593908870922 138.423828125) rotate(0 29.089988708496094 12.5)"><text x="29.089988708496094" y="17.619999999999997" font-family="Excalifont, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">month</text></g><g stroke-linecap="round" transform="translate(497.2458639705883 211.98046875) rotate(0 111.640625 46.845703125)"><path d="M23.42 0 C94.56 -2.39, 159.98 2.66, 199.86 0 C212.67 -1.25, 221.65 10.53, 223.28 23.42 C221.91 43.12, 225.32 61.14, 223.28 70.27 C220.17 88.25, 214.61 96.73, 199.86 93.69 C142.43 97.98, 88.16 91.55, 23.42 93.69 C6.77 91.99, -1.56 83.8, 0 70.27 C0.32 54.9, -0.11 34.54, 0 23.42 C1.91 8.76, 11.24 0.96, 23.42 0" stroke="none" stroke-width="0" fill="#fff9db"></path><path d="M23.42 0 C75.03 -2.86, 125.93 -3.67, 199.86 0 M23.42 0 C92.72 -0.69, 161.87 -0.7, 199.86 0 M199.86 0 C215.37 1.01, 221.43 8.15, 223.28 23.42 M199.86 0 C214.24 1.21, 221.2 8.23, 223.28 23.42 M223.28 23.42 C221.47 39.67, 224.35 53.57, 223.28 70.27 M223.28 23.42 C222.64 36.75, 224.08 48.12, 223.28 70.27 M223.28 70.27 C221.8 85.85, 214.68 94.76, 199.86 93.69 M223.28 70.27 C223.56 87.22, 215.81 92.38, 199.86 93.69 M199.86 93.69 C150.28 92.25, 97.59 93.72, 23.42 93.69 M199.86 93.69 C146.6 91.88, 91.4 92.8, 23.42 93.69 M23.42 93.69 C7.84 94.35, 0.71 87.8, 0 70.27 M23.42 93.69 C7.29 93.49, -1.91 86.97, 0 70.27 M0 70.27 C0.3 57.59, 0.57 43.53, 0 23.42 M0 70.27 C0.39 57.19, -1.02 41.54, 0 23.42 M0 23.42 C0.96 6.43, 8.9 1.85, 23.42 0 M0 23.42 C-0.02 9.67, 8.97 1.17, 23.42 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(579.7965002620922 246.326171875) rotate(0 29.089988708496094 12.5)"><text x="29.089988708496094" y="17.619999999999997" font-family="Excalifont, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">month</text></g><g stroke-linecap="round" transform="translate(498.3864889705883 330.04296875) rotate(0 110.775390625 52.20703125)"><path d="M26.1 0 C71.71 -2.47, 119.56 1.99, 195.45 0 C216.28 -3.12, 225.14 10.77, 221.55 26.1 C218.45 37.65, 222.28 44.84, 221.55 78.31 C221.56 92.21, 213.14 102.64, 195.45 104.41 C149.15 104.19, 106.19 103.98, 26.1 104.41 C10.21 107.54, -3.11 96.23, 0 78.31 C-2.46 63.36, 3.89 56.08, 0 26.1 C-1.68 10.84, 6.97 1.02, 26.1 0" stroke="none" stroke-width="0" fill="#fff9db"></path><path d="M26.1 0 C68.09 -1.87, 111.86 0.33, 195.45 0 M26.1 0 C89.42 1.22, 152.27 1.55, 195.45 0 M195.45 0 C212.72 0.85, 219.94 10.33, 221.55 26.1 M195.45 0 C211.15 -2.23, 220.89 7.61, 221.55 26.1 M221.55 26.1 C220.16 37.55, 221.17 54.32, 221.55 78.31 M221.55 26.1 C221.84 41.9, 221.84 55.31, 221.55 78.31 M221.55 78.31 C221.77 93.85, 211.98 106.1, 195.45 104.41 M221.55 78.31 C220.68 94.5, 210.66 106.53, 195.45 104.41 M195.45 104.41 C145.76 106.08, 96.09 102.89, 26.1 104.41 M195.45 104.41 C150.07 104.44, 105.6 103.16, 26.1 104.41 M26.1 104.41 C9.18 103.16, -1.18 96.16, 0 78.31 M26.1 104.41 C9.86 103.66, 1.73 96.65, 0 78.31 M0 78.31 C0.69 63.25, 1.38 52.02, 0 26.1 M0 78.31 C0.21 64.41, -0.18 52.04, 0 26.1 M0 26.1 C0.39 9.09, 10.35 -0.65, 26.1 0 M0 26.1 C-1.61 10.1, 7.83 1.48, 26.1 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(580.0718908870922 369.75) rotate(0 29.089988708496094 12.5)"><text x="29.089988708496094" y="17.619999999999997" font-family="Excalifont, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">month</text></g><g stroke-linecap="round"><g transform="translate(666.7764246323532 67.87775735294116) rotate(0 147.33582261029414 32.58294195241032)"><path d="M0.66 0 C49.66 10.64, 245.41 53.86, 294.49 64.59 M-0.45 -1.04 C48.33 9.68, 244.26 54.76, 293.45 65.83" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(666.7764246323532 67.87775735294116) rotate(0 147.33582261029414 32.58294195241032)"><path d="M268.65 68.95 C277.14 67.45, 284.68 67.51, 293.45 65.83 M268.65 68.95 C274.52 68.45, 280.36 67.22, 293.45 65.83" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(666.7764246323532 67.87775735294116) rotate(0 147.33582261029414 32.58294195241032)"><path d="M272.45 52.28 C279.74 56.51, 285.99 62.3, 293.45 65.83 M272.45 52.28 C277.26 55.74, 282.19 58.48, 293.45 65.83" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(759.6600177258127 53.91332308510778) rotate(14.245900243765346 92.28993225097656 12.5)"><text x="0" y="17.619999999999997" font-family="Excalifont, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">onFieldValueChange</text></g><g stroke-linecap="round"><g transform="translate(963.4003366196048 172.76339581052005) rotate(0 -161.70809569950828 -8.809432280260026)"><path d="M0.34 0.56 C-53.55 -2.56, -269.28 -14.86, -323.23 -17.83 M-0.94 -0.19 C-54.99 -3.2, -270.22 -13.2, -324.09 -16.4" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(963.4003366196048 172.76339581052005) rotate(0 -161.70809569950828 -8.809432280260026)"><path d="M-300.18 -23.72 C-306.64 -21.07, -315.37 -19.06, -324.09 -16.4 M-300.18 -23.72 C-307.78 -21.23, -315.77 -18.77, -324.09 -16.4" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(963.4003366196048 172.76339581052005) rotate(0 -161.70809569950828 -8.809432280260026)"><path d="M-301.07 -6.64 C-307.38 -9.31, -315.84 -12.62, -324.09 -16.4 M-301.07 -6.64 C-308.4 -9.77, -316.1 -12.93, -324.09 -16.4" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(966.3044577205883 194.63824534556028) rotate(0 -160.25585937500003 31.04415857721986)"><path d="M1.08 0.87 C-52.38 11.36, -266.74 52.02, -320.37 62.22 M0.19 0.28 C-53.46 11.05, -267.62 53.32, -321.24 63.82" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(966.3044577205883 194.63824534556028) rotate(0 -160.25585937500003 31.04415857721986)"><path d="M-299.84 50.9 C-305.65 55.67, -314.08 59.53, -321.24 63.82 M-299.84 50.9 C-306.78 55.03, -312.73 58.57, -321.24 63.82" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(966.3044577205883 194.63824534556028) rotate(0 -160.25585937500003 31.04415857721986)"><path d="M-296.54 67.68 C-303.36 66.84, -312.9 65.07, -321.24 63.82 M-296.54 67.68 C-304.39 66.85, -311.32 65.43, -321.24 63.82" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(963.1771599264707 220.93426110532735) rotate(0 -165.06525735294122 79.92154132233632)"><path d="M-0.47 0.31 C-55.54 26.73, -274.52 132.69, -329.3 159.33 M1.48 -0.57 C-53.77 25.93, -274.66 133.57, -329.81 160.6" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(963.1771599264707 220.93426110532735) rotate(0 -165.06525735294122 79.92154132233632)"><path d="M-312.45 142.61 C-318.66 151.02, -326.87 158.34, -329.81 160.6 M-312.45 142.61 C-317.38 149.05, -323.57 153.39, -329.81 160.6" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(963.1771599264707 220.93426110532735) rotate(0 -165.06525735294122 79.92154132233632)"><path d="M-304.95 157.97 C-314.22 160.3, -325.39 161.56, -329.81 160.6 M-304.95 157.97 C-312.45 159.37, -321.07 158.72, -329.81 160.6" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(781.3669577205883 141.19140625) rotate(7.679008149142445 16.329986572265625 12.5)"><text x="0" y="17.619999999999997" font-family="Excalifont, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">set</text></g><g transform="translate(797.9900961483227 199.01171875) rotate(350.0183670663557 16.329986572265625 12.5)"><text x="0" y="17.619999999999997" font-family="Excalifont, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">set</text></g><g transform="translate(829.6463461483227 262.1875) rotate(335.845832050625 16.329986572265625 12.5)"><text x="0" y="17.619999999999997" font-family="Excalifont, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">set</text></g><g stroke-linecap="round"><g transform="translate(580.8357077205883 155.96875) rotate(0 -163.77722886029414 -21.545052213733058)"><path d="M1.01 0.62 C-53.8 -6.26, -273.19 -34.78, -327.78 -42.26 M0.08 -0.09 C-55 -7.22, -274.38 -36.7, -328.84 -43.95" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(580.8357077205883 155.96875) rotate(0 -163.77722886029414 -21.545052213733058)"><path d="M-304.42 -49.31 C-312.93 -47.39, -322.09 -43.17, -328.84 -43.95 M-304.42 -49.31 C-310.12 -47.71, -314.07 -47.24, -328.84 -43.95" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(580.8357077205883 155.96875) rotate(0 -163.77722886029414 -21.545052213733058)"><path d="M-306.69 -32.36 C-314.18 -37.06, -322.46 -39.44, -328.84 -43.95 M-306.69 -32.36 C-312.01 -34.19, -315.49 -37.15, -328.84 -43.95" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(10 31.429227941176464) rotate(0 119.4921875 64.59765625)"><path d="M32 0 C69.01 1.56, 111.68 0.85, 206.98 0 C225.74 -1.46, 235.42 8, 238.98 32 C240.11 46.26, 236.37 64.98, 238.98 97.2 C237.51 121.79, 225.44 132.35, 206.98 129.2 C162.78 129.35, 114.56 128.8, 32 129.2 C8.46 127.79, -3.1 120.43, 0 97.2 C4.09 75.95, 0 52.76, 0 32 C-3.19 11.78, 13.52 -1.22, 32 0" stroke="none" stroke-width="0" fill="#ffffff"></path><path d="M32 0 C69.68 2.34, 109.57 3.09, 206.98 0 M32 0 C88.64 1, 145.7 0.34, 206.98 0 M206.98 0 C226.9 -0.45, 238.64 12.54, 238.98 32 M206.98 0 C226.61 2.08, 239.1 9.38, 238.98 32 M238.98 32 C238.15 44.83, 239.53 59.65, 238.98 97.2 M238.98 32 C239.32 56.83, 239.1 82.87, 238.98 97.2 M238.98 97.2 C238.31 120.49, 228.91 129.74, 206.98 129.2 M238.98 97.2 C238.98 119.49, 228.59 129.22, 206.98 129.2 M206.98 129.2 C146.2 128.34, 88.84 129.31, 32 129.2 M206.98 129.2 C155.52 128.92, 104.45 130.48, 32 129.2 M32 129.2 C11.6 130.78, -0.47 117.19, 0 97.2 M32 129.2 C11.56 129.01, -0.32 116.69, 0 97.2 M0 97.2 C-0.68 73.25, -0.49 45.9, 0 32 M0 97.2 C-0.85 83.08, -1.12 69.72, 0 32 M0 32 C0.02 10.24, 12.54 -1.28, 32 0 M0 32 C1.46 10.07, 8.5 -0.39, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(44.29225158691406 83.52688419117646) rotate(0 85.19993591308594 12.5)"><text x="85.19993591308594" y="17.619999999999997" font-family="Excalifont, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">graph hook script</text></g><g stroke-linecap="round" transform="translate(969.6206341911766 99.56962316176475) rotate(0 112.41015625 93.333984375)"><path d="M32 0 C80.21 3.98, 121.32 3.73, 192.82 0 C213.83 -3.39, 228.28 12.85, 224.82 32 C229.38 57.65, 228.48 81.21, 224.82 154.67 C222.89 177.4, 214.49 189.8, 192.82 186.67 C140.96 182.85, 95.34 187.04, 32 186.67 C9.04 189.56, -2.26 174.56, 0 154.67 C-1.47 125.24, -0.36 97.35, 0 32 C2.01 13.68, 9.43 2.91, 32 0" stroke="none" stroke-width="0" fill="#ffffff"></path><path d="M32 0 C94.8 -2.9, 158.29 -2.59, 192.82 0 M32 0 C65.69 1.38, 99.03 0.08, 192.82 0 M192.82 0 C213.34 -1.98, 223.34 9.81, 224.82 32 M192.82 0 C215.05 0.37, 225.25 9.06, 224.82 32 M224.82 32 C226.44 56.73, 226.38 83.75, 224.82 154.67 M224.82 32 C224.73 59.89, 224.58 88.97, 224.82 154.67 M224.82 154.67 C224.04 174.28, 215.21 187.84, 192.82 186.67 M224.82 154.67 C222.62 175.96, 216.05 188.03, 192.82 186.67 M192.82 186.67 C150.22 186.83, 105.7 185.53, 32 186.67 M192.82 186.67 C150.54 187.35, 108.06 187.27, 32 186.67 M32 186.67 C8.76 186.61, -0.21 175.83, 0 154.67 M32 186.67 C8.56 188.63, -2.21 173.71, 0 154.67 M0 154.67 C2.7 115.23, 2.96 78.23, 0 32 M0 154.67 C-0.17 116.49, 0.69 79.52, 0 32 M0 32 C-0.76 12.38, 11.31 0.5, 32 0 M0 32 C1.87 11.14, 9.65 -2.05, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1000.850851171157 180.40360753676475) rotate(0 81.17993927001953 12.5)"><text x="81.17993927001953" y="17.619999999999997" font-family="Excalifont, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">page hook script</text></g><g transform="translate(272.91111831571135 91.78712490526652) rotate(7.764587823332299 92.28993225097656 12.5)"><text x="0" y="17.619999999999997" font-family="Excalifont, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">onFieldValueChange</text></g><g stroke-linecap="round"><g transform="translate(897.6482077205883 54.04296875) rotate(0 17.921875 -9.248046875)"><path d="M-0.02 0.29 C6.02 -2.97, 30.27 -15.9, 36.25 -19.04 M-0.69 -0.03 C5.31 -3.01, 29.99 -15.63, 36.03 -18.62" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(897.6482077205883 54.04296875) rotate(0 17.921875 -9.248046875)"><path d="M22.22 -3.93 C26.87 -7.63, 29.53 -12.78, 36.03 -18.62 M22.22 -3.93 C25.98 -7.76, 30.03 -12.06, 36.03 -18.62" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(897.6482077205883 54.04296875) rotate(0 17.921875 -9.248046875)"><path d="M16.01 -16.24 C22.6 -16.22, 27.13 -17.63, 36.03 -18.62 M16.01 -16.24 C21.56 -16.57, 27.39 -17.34, 36.03 -18.62" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(944.4372702205883 10) rotate(0 95.6499252319336 12.5)"><text x="0" y="17.619999999999997" font-family="Excalifont, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">mabye onFieldReact</text></g></svg>

如果要管理不同字段的值，schema的`type`非常关键。
- 当`type`为`void`的时候，表单会忽略这一层的路径。
- 当`type`为`object`的时候，该字段会成为承接子字段的对象。
- 当`type`为基本类型的时候，该字段代表具体的值。

当时我们本来打算封装一个组合了Card + Tabs功能的组件，但是在Formily的机制下，字段本身不能既表示自己的值（Tabs的activeKey），也成为包含子字段的对象，所以最后打消了这种做法。

## 函数处理
如果坚持使用JSON Schema，那往Schema里塞函数的做法就显得不那么合理了。在Schema中，Formily会把`{{}}`的字符串处理成函数，所以要转换一下写法。
```tsx
// ...
	input: {
		type: "string",
		"x-component": "Input",
		"x-component-props": {
			// onClick: `{{ (event) => { console.log(event) } }}
		}
	}
// ...
```

同样的，对需要传ReactNode的props也是如此处理，不过需要使用`React.createElement`

```tsx
import { createElement } from "react";
import { Input } from '@formily/antd-v5'
import { SearchOutlined } from '@ant-design/icons';

// ...
const SchemaField = createSchemaField({
	components: {
		Input
	},
	scope: {
		createElement,
		SearchOutlined
	}
})
// ...
input: {
	type: "string",
	"x-component": "Input",
	"x-component-props": {
		suffix: `{{ createElement(SearchOutlined) }}`
	}
}
// ...
```

## 字段联动
这部分内容[官方文档](https://formilyjs.org/zh-CN/guide/advanced/linkages)说得就挺好的，就不赘述了

## 数据传递
我们当时的页面有一个联动逻辑，当在顶部导航栏切换时间后，下面的各个图表都要同步更新数据，而我们的解决方式如下，不一定是最佳实践。

<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1080.55859375 350.16015625" width="1080.55859375" height="350.16015625">
  <!-- svg-source:excalidraw -->
  
  <defs>
    <style class="style-fonts">
      @font-face {
        font-family: Cascadia;
        src: url(data:font/woff2;base64,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);
          }
    </style>
    
  </defs>
  <rect x="0" y="0" width="1080.55859375" height="350.16015625" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(10 138.03125) rotate(0 41.37109375 24.36328125)"><path d="M12.18 0 C33.28 -1.66, 55.59 -1.96, 70.56 0 M12.18 0 C35.14 -0.95, 57.42 -0.97, 70.56 0 M70.56 0 C79.26 1.48, 83.84 3.24, 82.74 12.18 M70.56 0 C79.04 -0.36, 81.94 3.96, 82.74 12.18 M82.74 12.18 C81.48 17.96, 80.86 23.08, 82.74 36.54 M82.74 12.18 C82.09 17.22, 83.73 23.99, 82.74 36.54 M82.74 36.54 C82.25 45.8, 78.72 48.04, 70.56 48.73 M82.74 36.54 C81.93 43.1, 76.62 46.74, 70.56 48.73 M70.56 48.73 C55.96 48.96, 43.1 50.06, 12.18 48.73 M70.56 48.73 C49.04 48.73, 28.31 47.94, 12.18 48.73 M12.18 48.73 C2.2 49.13, -1.52 46.18, 0 36.54 M12.18 48.73 C6.29 48.47, 1.97 43.74, 0 36.54 M0 36.54 C0.01 28.16, -0.89 25.2, 0 12.18 M0 36.54 C1.02 30.85, 0.64 25.26, 0 12.18 M0 12.18 C-1.76 5.06, 4.27 0.8, 12.18 0 M0 12.18 C1 5.94, 4.21 0.99, 12.18 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(27.79296875 150.39453125) rotate(0 23.578125 12)"><text x="23.578125" y="18.93359375" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Form</text></g><g stroke-linecap="round" transform="translate(185.36328125 127.96875) rotate(0 64.5859375 31.11328125)"><path d="M15.56 0 C49.22 2.26, 84.53 0.08, 113.62 0 M15.56 0 C42.04 -0.82, 67.56 -1.12, 113.62 0 M113.62 0 C124.66 0.32, 127.41 4.27, 129.17 15.56 M113.62 0 C122.78 -1.36, 130.99 6.58, 129.17 15.56 M129.17 15.56 C128.01 24.53, 129.57 29.85, 129.17 46.67 M129.17 15.56 C128.86 26.56, 128.77 38.22, 129.17 46.67 M129.17 46.67 C130.72 55.24, 122.83 61.45, 113.62 62.23 M129.17 46.67 C129.9 57.5, 123.63 60.5, 113.62 62.23 M113.62 62.23 C92.76 60.99, 68.38 64.56, 15.56 62.23 M113.62 62.23 C90.86 60.89, 66.59 62.41, 15.56 62.23 M15.56 62.23 C4.98 62.32, 1.3 58.9, 0 46.67 M15.56 62.23 C4.1 61.74, -1.95 58.94, 0 46.67 M0 46.67 C1.46 37.68, 1.77 31.03, 0 15.56 M0 46.67 C0.79 38.1, 0.53 28.14, 0 15.56 M0 15.56 C0.13 4.81, 6.22 0.25, 15.56 0 M0 15.56 C1.37 6.82, 3.74 2, 15.56 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(202.93359375 147.08203125) rotate(0 47.015625 12)"><text x="47.015625" y="18.93359375" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">void div</text></g><g stroke-linecap="round" transform="translate(426.6875 10) rotate(0 152.17578125 60.2265625)"><path d="M30.11 0 C123.04 -0.1, 219.9 0.6, 274.24 0 C297.55 -1.18, 302.99 9.39, 304.35 30.11 C302.71 44.8, 308.27 54.99, 304.35 90.34 C305.74 112.8, 291.76 118.63, 274.24 120.45 C187.93 120.5, 104.57 118.79, 30.11 120.45 C9.07 120.33, 2.31 111.56, 0 90.34 C-3.09 74.52, 2.99 67.86, 0 30.11 C-0.28 11.19, 9.57 -3.5, 30.11 0" stroke="none" stroke-width="0" fill="#e9ecef"></path><path d="M30.11 0 C93.04 -1.94, 152.03 -1.75, 274.24 0 M30.11 0 C109.11 -1.04, 186.64 -1.51, 274.24 0 M274.24 0 C295.64 1.24, 303.87 9.92, 304.35 30.11 M274.24 0 C295.48 -0.04, 303.6 8.45, 304.35 30.11 M304.35 30.11 C306.13 53.49, 305.71 75.51, 304.35 90.34 M304.35 30.11 C303.18 53.69, 304.71 76.33, 304.35 90.34 M304.35 90.34 C302.63 109.13, 294.27 122.14, 274.24 120.45 M304.35 90.34 C303.53 110.05, 293.74 120.72, 274.24 120.45 M274.24 120.45 C219.53 119.43, 162.74 118.71, 30.11 120.45 M274.24 120.45 C184.08 121.43, 93.49 121.7, 30.11 120.45 M30.11 120.45 C11.89 121.87, -0.59 112.18, 0 90.34 M30.11 120.45 C12.28 122.48, -1.3 112.59, 0 90.34 M0 90.34 C1.2 69.05, 0.64 45.75, 0 30.11 M0 90.34 C0.2 69.11, 0.64 47.28, 0 30.11 M0 30.11 C-1.16 9.12, 11.62 -1.73, 30.11 0 M0 30.11 C0.51 8.87, 11.65 -0.93, 30.11 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g stroke-linecap="round" transform="translate(446.81640625 47.9140625) rotate(0 128.11328125000003 17)"><path d="M8.5 0 C97.3 -1.9, 191.42 -3.88, 247.73 0 C255.15 2.87, 258.13 2.93, 256.23 8.5 C253.48 15.31, 258.38 16.41, 256.23 25.5 C254.49 29.26, 254.71 34.66, 247.73 34 C150.69 33.52, 57.12 34.5, 8.5 34 C2.11 34.4, -2.75 28.14, 0 25.5 C0.13 19.33, -1.51 16.72, 0 8.5 C-0.65 3.51, 6.22 -0.08, 8.5 0" stroke="none" stroke-width="0" fill="#ffffff"></path><path d="M8.5 0 C98.56 0.68, 187.16 0.68, 247.73 0 M8.5 0 C102.06 -1.48, 196.1 -1.86, 247.73 0 M247.73 0 C252.31 1.38, 254.25 2.54, 256.23 8.5 M247.73 0 C252.82 -1.35, 258.34 2.88, 256.23 8.5 M256.23 8.5 C256.36 11.38, 255.67 16.26, 256.23 25.5 M256.23 8.5 C256.52 12.67, 255.75 17.55, 256.23 25.5 M256.23 25.5 C258.01 29.2, 254.07 32.7, 247.73 34 M256.23 25.5 C258.5 30.03, 253.47 36.07, 247.73 34 M247.73 34 C169.95 36.01, 95.06 35.04, 8.5 34 M247.73 34 C182.3 35.66, 119.33 34.87, 8.5 34 M8.5 34 C1.13 35.61, -0.5 29.43, 0 25.5 M8.5 34 C1.34 32.09, 0.82 31.89, 0 25.5 M0 25.5 C0 21.15, -0.23 16.02, 0 8.5 M0 25.5 C-0.62 19.1, -0.48 13.75, 0 8.5 M0 8.5 C-1.98 2.05, 0.84 -0.27, 8.5 0 M0 8.5 C1.48 4.19, 2.5 -1.43, 8.5 0" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(492.7578125 52.9140625) rotate(0 82.17187499999999 12)"><text x="82.171875" y="18.93359375" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">keyword:string</text></g><g transform="translate(517.8359375 19.8046875) rotate(0 47.015625 12)"><text x="0" y="18.93359375" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">FormItem</text></g><g stroke-linecap="round" transform="translate(433.3828125 180.875) rotate(0 154.845703125 72.830078125)"><path d="M32 0 C112.07 0.21, 186.37 2.2, 277.69 0 C296.02 0.53, 312.09 13.07, 309.69 32 C310.92 61.11, 306.49 94.33, 309.69 113.66 C310.09 137.54, 296.82 142.18, 277.69 145.66 C189.54 142.22, 100.43 146.35, 32 145.66 C9 146.59, 2.4 132.25, 0 113.66 C-0.87 90.56, -1.08 73.1, 0 32 C-1.28 8.75, 8.8 0.31, 32 0" stroke="none" stroke-width="0" fill="#e9ecef"></path><path d="M32 0 C124.53 0.48, 215.65 0.54, 277.69 0 M32 0 C90.11 -1.61, 147.98 -0.94, 277.69 0 M277.69 0 C297.47 0.7, 311.25 12.14, 309.69 32 M277.69 0 C299.22 1.54, 309.68 12.92, 309.69 32 M309.69 32 C309.17 55.47, 311.25 76.66, 309.69 113.66 M309.69 32 C309.21 57.98, 309.49 83.49, 309.69 113.66 M309.69 113.66 C308.85 135.92, 299.07 146.9, 277.69 145.66 M309.69 113.66 C310.6 133.88, 299.94 146.42, 277.69 145.66 M277.69 145.66 C180.43 146.15, 82 145.81, 32 145.66 M277.69 145.66 C202.74 144.17, 127.81 144.19, 32 145.66 M32 145.66 C10.61 146.83, -1.68 133.76, 0 113.66 M32 145.66 C8.82 143.61, 2.1 133.85, 0 113.66 M0 113.66 C1.67 85.66, -0.88 60.89, 0 32 M0 113.66 C0.33 93.62, 1.11 72.83, 0 32 M0 32 C0.01 12.66, 11.5 -1.48, 32 0 M0 32 C-1.31 8.45, 11.34 -0.32, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g stroke-linecap="round" transform="translate(810.85546875 146.47265625) rotate(0 128.11328125 34.958984375)"><path d="M17.48 0 C76.98 2.15, 139.33 1.01, 238.75 0 C252.79 2.4, 258.51 6.32, 256.23 17.48 C253 27.63, 256.8 34.39, 256.23 52.44 C254.02 60.62, 252.62 66.92, 238.75 69.92 C176.08 67.81, 110.95 67.33, 17.48 69.92 C8.23 67.18, -1.76 64.15, 0 52.44 C-0.91 40.11, -1.13 24.97, 0 17.48 C-1.87 6.14, 4.99 -2.79, 17.48 0" stroke="none" stroke-width="0" fill="#ffffff"></path><path d="M17.48 0 C86.41 -0.01, 153.25 -1.3, 238.75 0 M17.48 0 C101.98 0.59, 186.75 0.1, 238.75 0 M238.75 0 C251.95 1.47, 256.4 7.17, 256.23 17.48 M238.75 0 C250.39 2.25, 255.73 5.04, 256.23 17.48 M256.23 17.48 C258.02 26.02, 256.52 35.42, 256.23 52.44 M256.23 17.48 C256.26 27.97, 255.74 39.41, 256.23 52.44 M256.23 52.44 C256.27 65.33, 251.19 68.95, 238.75 69.92 M256.23 52.44 C257.14 64.85, 252.69 70.09, 238.75 69.92 M238.75 69.92 C174.18 70.85, 108.15 71.75, 17.48 69.92 M238.75 69.92 C184.28 68.49, 129.13 69.43, 17.48 69.92 M17.48 69.92 C4.14 68.68, -1.61 62.31, 0 52.44 M17.48 69.92 C7.93 68.77, 0.57 63.67, 0 52.44 M0 52.44 C-1.3 39.5, -1.16 24.21, 0 17.48 M0 52.44 C0.52 43.17, 0.14 33.11, 0 17.48 M0 17.48 C0.83 4.35, 4.69 -1.92, 17.48 0 M0 17.48 C0.67 5.5, 6.27 -1.34, 17.48 0" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(868.65625 169.431640625) rotate(0 70.3125 12)"><text x="70.3125" y="18.93359375" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">month:string</text></g><g transform="translate(535.671875 194.33984375) rotate(0 47.015625 12)"><text x="0" y="18.93359375" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">FormItem</text></g><g stroke-linecap="round" transform="translate(456.98046875 227.109375) rotate(0 133.5703125 45.15625)"><path d="M22.58 0 C81.5 0.72, 142.67 3.24, 244.56 0 C260.42 3.25, 267.51 8.44, 267.14 22.58 C270.6 39.8, 266.35 53.15, 267.14 67.73 C267.32 82.72, 256.08 92.02, 244.56 90.31 C195.12 93.94, 152.37 93.46, 22.58 90.31 C7.39 92.11, 2.71 79.4, 0 67.73 C0.23 60.52, 3.19 44.51, 0 22.58 C-3.35 6.5, 4.31 -0.47, 22.58 0" stroke="none" stroke-width="0" fill="#ffffff"></path><path d="M22.58 0 C77.23 -0.76, 133.67 0.83, 244.56 0 M22.58 0 C74.48 1.84, 126.81 0.96, 244.56 0 M244.56 0 C258.46 1.09, 268.1 5.69, 267.14 22.58 M244.56 0 C257.51 0.88, 269.25 8.09, 267.14 22.58 M267.14 22.58 C267.02 33.18, 265.63 43.23, 267.14 67.73 M267.14 22.58 C266.81 32.27, 268.2 42.07, 267.14 67.73 M267.14 67.73 C267.16 84.76, 260.27 89.66, 244.56 90.31 M267.14 67.73 C265.17 81.58, 259.9 88.98, 244.56 90.31 M244.56 90.31 C186.33 90.79, 131.41 90.71, 22.58 90.31 M244.56 90.31 C157.42 91.56, 71.55 90.86, 22.58 90.31 M22.58 90.31 C5.77 89.88, 1.97 83.54, 0 67.73 M22.58 90.31 C6.19 88.13, 0.78 83.44, 0 67.73 M0 67.73 C1.55 54.71, 1.26 39.78, 0 22.58 M0 67.73 C-1.32 58.41, 0.1 50.23, 0 22.58 M0 22.58 C-0.64 8.2, 7.75 0.85, 22.58 0 M0 22.58 C0.93 6.57, 7.53 2.22, 22.58 0" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(479.08203125 260.265625) rotate(0 111.46875 12)"><text x="111.46875" y="18.93359375" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">subContainer:object</text></g><g stroke-linecap="round" transform="translate(814.33203125 270.2421875) rotate(0 128.11328125 34.958984375)"><path d="M17.48 0 C106.16 0.85, 188.31 -4.16, 238.75 0 C249.33 -3.4, 255.31 3.49, 256.23 17.48 C252.64 29.54, 259.28 39.96, 256.23 52.44 C259.56 60.93, 249.54 70.53, 238.75 69.92 C170.88 70.53, 107.73 70.79, 17.48 69.92 C5.42 73.41, 0.46 60.78, 0 52.44 C-2.82 44.35, -2.33 32.9, 0 17.48 C-0.22 6.25, 4.3 1.71, 17.48 0" stroke="none" stroke-width="0" fill="#ffffff"></path><path d="M17.48 0 C62.84 0.46, 111.3 0.5, 238.75 0 M17.48 0 C98.3 0.14, 180.23 1.09, 238.75 0 M238.75 0 C251.68 0.3, 257.62 5.56, 256.23 17.48 M238.75 0 C249.21 -1.04, 255.78 4.34, 256.23 17.48 M256.23 17.48 C258.26 28.52, 255.83 36.36, 256.23 52.44 M256.23 17.48 C256.63 31.06, 255.22 42.72, 256.23 52.44 M256.23 52.44 C257.97 64.13, 251.24 68.11, 238.75 69.92 M256.23 52.44 C255.18 62.09, 250.77 68.11, 238.75 69.92 M238.75 69.92 C164.74 72.37, 92.02 72.62, 17.48 69.92 M238.75 69.92 C187.96 71.55, 135.7 71.54, 17.48 69.92 M17.48 69.92 C4.3 68.23, 1.39 65.12, 0 52.44 M17.48 69.92 C5.43 71.28, -0.28 65.71, 0 52.44 M0 52.44 C1.77 44.44, -0.82 31.8, 0 17.48 M0 52.44 C-0.71 43.02, -0.51 32.44, 0 17.48 M0 17.48 C1.74 4.96, 4.56 0.19, 17.48 0 M0 17.48 C0.67 8.05, 4.48 0.01, 17.48 0" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(883.8515625 293.201171875) rotate(0 58.59375 12)"><text x="58.59375" y="18.93359375" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">day:string</text></g><g stroke-linecap="round"><g transform="translate(96.29296875 161.390625) rotate(0 38.255859375 -0.83203125)"><path d="M0.43 0.34 C12.99 -0.1, 63.5 -1.35, 76.17 -1.7 M-0.81 -0.53 C11.49 -0.85, 62.3 -0.18, 75.04 -0.18" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(96.29296875 161.390625) rotate(0 38.255859375 -0.83203125)"><path d="M51.49 8.21 C60.62 4.48, 68.64 1.83, 75.04 -0.18 M51.49 8.21 C58.94 4.97, 64.33 3.91, 75.04 -0.18" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(96.29296875 161.390625) rotate(0 38.255859375 -0.83203125)"><path d="M51.61 -8.9 C60.83 -6.35, 68.81 -2.73, 75.04 -0.18 M51.61 -8.9 C58.95 -7.13, 64.31 -3.18, 75.04 -0.18" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(315.53515625 154.12109169588524) rotate(0 62.970703125 -41.848949998440844)"><path d="M-0.29 0.38 C20.87 -13.77, 105.71 -69.73, 126.66 -83.81 M1.76 -0.46 C22.85 -13.9, 105.66 -68.57, 126.09 -82.33" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(315.53515625 154.12109169588524) rotate(0 62.970703125 -41.848949998440844)"><path d="M111.27 -62.2 C115.8 -66.5, 119.04 -74.13, 126.09 -82.33 M111.27 -62.2 C114.15 -66.55, 118.02 -72.17, 126.09 -82.33" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(315.53515625 154.12109169588524) rotate(0 62.970703125 -41.848949998440844)"><path d="M101.8 -76.44 C109.06 -76.8, 114.9 -80.53, 126.09 -82.33 M101.8 -76.44 C107.28 -76.96, 113.65 -78.81, 126.09 -82.33" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(315.53515625 167.8270752141567) rotate(0 68.791015625 48.820837392921625)"><path d="M-0.08 -0.42 C22.84 15.79, 114.16 80.5, 136.97 96.86 M-1.58 -1.68 C21.79 14.7, 115.89 81.18, 139.36 97.98" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(315.53515625 167.8270752141567) rotate(0 68.791015625 48.820837392921625)"><path d="M115.26 91.35 C120.67 92.04, 126.18 93.42, 139.36 97.98 M115.26 91.35 C122.55 93.15, 129.91 96.27, 139.36 97.98" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(315.53515625 167.8270752141567) rotate(0 68.791015625 48.820837392921625)"><path d="M125.16 77.41 C128.01 81.63, 131.01 86.56, 139.36 97.98 M125.16 77.41 C129.42 83.49, 133.73 90.92, 139.36 97.98" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(725.12109375 263.4513892130321) rotate(0 41.02734375 -40.383897731516036)"><path d="M-0.29 -0.39 C13.13 -13.89, 67.8 -66.98, 81.45 -80.41 M1.76 -1.64 C15.49 -15.57, 70.71 -69.33, 83.85 -82.34" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(725.12109375 263.4513892130321) rotate(0 41.02734375 -40.383897731516036)"><path d="M73.07 -59.79 C76.41 -69.35, 81.77 -77.67, 83.85 -82.34 M73.07 -59.79 C76.79 -66.62, 78.74 -72.15, 83.85 -82.34" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(725.12109375 263.4513892130321) rotate(0 41.02734375 -40.383897731516036)"><path d="M61.09 -71.99 C69.05 -76.88, 78.97 -80.55, 83.85 -82.34 M61.09 -71.99 C68.24 -75.3, 73.61 -77.34, 83.85 -82.34" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(725.12109375 267.20814297187695) rotate(0 44.10546875 18.160638133294714)"><path d="M-0.9 1.13 C13.7 7.04, 73.75 30.17, 88.48 36.03 M0.82 0.68 C15.21 6.72, 72.81 31.26, 87.67 37.42" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(725.12109375 267.20814297187695) rotate(0 44.10546875 18.160638133294714)"><path d="M62.7 36.19 C73.89 37.28, 80.82 36.05, 87.67 37.42 M62.7 36.19 C70.83 36.35, 76.95 36.78, 87.67 37.42" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(725.12109375 267.20814297187695) rotate(0 44.10546875 18.160638133294714)"><path d="M69.34 20.42 C78.13 27.33, 82.59 31.97, 87.67 37.42 M69.34 20.42 C75.61 25.29, 79.73 30.45, 87.67 37.42" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask></svg>

## 组件开发流程
Formily组件和常规的React组件差别还是挺大的，如果把`@formily/antd-v5`作为官方的推荐实践方式的话，那就不能以之前的思路来开发组件。

以antd的Table为例，无论是`columns`还是`dataSource`都是作为props的一部分传递给组件的，但在Formily中，数据应只由于默认配置的`props.value`来处理，所以开发时应该做好渲染数据与`props.value`的转换。对接已有组件时也可以用官方的[mapProps](https://react.formilyjs.org/zh-CN/api/shared/map-props)方法做映射。

> 要较真的话数据放在哪都是可以实现功能的，但能简单的从`form.values`拿到所有值还是比把数据分散到field的`componentProps`要方便的。

除此之外，善用`useForm`、`useField`和`useFieldSchema`可以方便获取父子字段的内容。

## 一些坑
#### ReactNode转Schema
虽然可以用`{{createElement}}`的方式传递ReactNode，但对于自定义组件来说还需要提前把组件传入scope中，对于动态的Schema来说，这难以做到按需导入。

我当时的做法是组件内部做拦截。用`useFieldSchema`拿到Schema，然后判断对应的属性是否也是一个Schema对象，如果是则返回一个`RecursionField`来渲染Schema。

拦截写完后乍一看还没什么毛病，但是在antd的Table sortIcon时就傻眼了，渲染的图标在点击后完全没有状态变化。

个人猜测这跟Formily的渲染机制有关，`RecursionField`的渲染结果被缓存了，只是重新运行函数传递新的props还不足以触发其重新渲染。

#### onChange
还是跟Table的过滤有关，原流程中点击表头的排序会触发表格的`onChange`事件获得排序信息。

但我在尝试换了多种写法后发现仍不能触发这个`onChange`，看了[源码](https://github.com/alibaba/formily/commit/11e14a3973bd19bb38d5371aa8dd6cc2163c821b)后才发现为了防止冒泡官方给`onChange`覆盖了个空函数。你们是完全用不到这个功能吗？

️业务层面没什么解决方法，这里最后用了[[利用patch修改依赖源码|patch]]的方式解决的，颇为麻烦。
️️
